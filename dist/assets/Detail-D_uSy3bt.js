import{_ as V}from"./_plugin-vue_export-helper-DD8xY_cn.js";/* empty css              */import{P as C}from"./index-DT2YFU2q.js";import{a as D,S as P}from"./index-DAl3pzu5.js";import{N as F}from"./index-DP1erQjE.js";import{d as L,u as T,m as $,r as h,c as u,a as _,b as d,h as p,w as v,I as M,e,F as j,j as q,f as z,t as i,s as g,k as G}from"./index-BLgdBt6Y.js";import{a as O}from"./function-call-CNRQHFmk.js";const X={class:"inheritor-detail-container"},U={class:"detail-page"},H={class:"media"},J=["src","onClick"],K=["src"],Q={class:"info-panel"},W={class:"title"},Y={class:"meta"},Z={class:"meta-row"},ee={class:"meta-value"},se={class:"meta-row"},te={class:"meta-value"},ae={class:"meta-row"},oe={class:"meta-value"},ne={class:"meta-row"},le={class:"meta-value"},ie={class:"meta-row"},re={class:"meta-value"},ce={class:"section"},de={class:"section-content"},me=L({__name:"Detail",setup(ue){const E=T(),y=$(),m=h(!1),w=h(!1),a=h(null),b=u(()=>String(y.query.id||"")),k=u(()=>String(y.query.title||"传承人")),x=u(()=>a.value?.name||k.value),A=()=>{E.back()},N=async()=>{try{if(w.value=!0,!b.value){g("缺少传承人ID");return}const t=await G.inheritor.getInheritorById(b.value);t.code===1200&&t.data?a.value=t.data:g(t.msg||"获取详情失败")}catch(t){console.error("获取传承人详情失败:",t),g("获取详情失败")}finally{w.value=!1}};N();const B=()=>{m.value=!0,N().finally(()=>{m.value=!1})},R=t=>{const s=I.value.filter(o=>o.type==="image").map(o=>o.url);s.length&&O({images:s,startPosition:Math.max(0,t)})},I=u(()=>{const t=a.value||{},s=Array.isArray(t.imgList)?t.imgList:[],o=[];if(s.length){const f=[...s].sort((r,l)=>{const c=Number(r?.sortOrder??Number.MAX_SAFE_INTEGER),n=Number(l?.sortOrder??Number.MAX_SAFE_INTEGER);return c-n});for(const r of f){const l=String(r?.image||"");if(!l)continue;const c=/\.(mp4|m3u8|avi|mov|webm)$/i.test(l);o.push({type:c?"video":"image",url:l})}}return o});return(t,s)=>{const o=M,f=F,r=P,l=D,c=C;return d(),_("div",X,[p(f,{title:x.value,fixed:"",placeholder:"","z-index":"999",border:!1,onClickLeft:A},{left:v(()=>[p(o,{name:"arrow-left",class:"back-icon"})]),_:1},8,["title"]),p(c,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=n=>m.value=n),onRefresh:B},{default:v(()=>[e("div",U,[e("div",H,[p(l,{class:"media-swipe",autoplay:0},{default:v(()=>[(d(!0),_(j,null,q(I.value,(n,S)=>(d(),z(r,{key:`${n.type}-${S}`},{default:v(()=>[n.type==="image"?(d(),_("img",{key:0,src:n.url,class:"media-img",loading:"lazy",onClick:_e=>R(S)},null,8,J)):(d(),_("video",{key:1,class:"media-video",src:n.url,controls:"",playsinline:"","webkit-playsinline":"",preload:"metadata"},null,8,K))]),_:2},1024))),128))]),_:1})]),e("div",Q,[e("h2",W,i(a.value?.name||k.value),1),e("div",Y,[e("div",Z,[s[1]||(s[1]=e("span",{class:"meta-label"},"性别：",-1)),e("span",ee,i(a.value?.gender||"-"),1)]),e("div",se,[s[2]||(s[2]=e("span",{class:"meta-label"},"民族：",-1)),e("span",te,i(a.value?.nation||"-"),1)]),e("div",ae,[s[3]||(s[3]=e("span",{class:"meta-label"},"出生日期：",-1)),e("span",oe,i(a.value?.birthday||"-"),1)]),e("div",ne,[s[4]||(s[4]=e("span",{class:"meta-label"},"属地：",-1)),e("span",le,i(a.value?.region||"-"),1)]),e("div",ie,[s[5]||(s[5]=e("span",{class:"meta-label"},"项目名称：",-1)),e("span",re,i(a.value?.projectName||"-"),1)])]),e("div",ce,[s[6]||(s[6]=e("h3",{class:"section-title"},"简介",-1)),e("p",de,i(a.value?.intro||"-"),1)])])])]),_:1},8,["modelValue"])])}}}),be=V(me,[["__scopeId","data-v-cb899ce4"]]);export{be as default};
