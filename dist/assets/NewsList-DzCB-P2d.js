import{_ as C}from"./_plugin-vue_export-helper-DD8xY_cn.js";/* empty css              */import{P as $}from"./index-DT2YFU2q.js";import{L as B}from"./index-OVuGm6T4.js";import{S as I}from"./index-CiIRxdMQ.js";import{N as F}from"./index-DP1erQjE.js";import{d as P,u as R,r as n,a as v,b as m,h as l,e as s,w as h,I as T,F as U,j as z,t as b,i as j,k as q,l as E,s as M}from"./index-BLgdBt6Y.js";import"./use-route-2DCuB_F_.js";import"./use-id-Dv9asnMi.js";const W={class:"exhibition-list-container"},Y={class:"scroll-content"},A={class:"search-container"},G={class:"news-list"},H=["onClick"],J={class:"news-img-box"},K=["src"],O={class:"news-info"},Q={class:"news-title van-multi-ellipsis--l2"},X={class:"news-date"},Z=20,ee=P({__name:"NewsList",setup(te){const g=R(),u=n(""),d=n([]),i=n(!1),r=n(!1),o=n(!1),_=n(1),k=()=>g.back(),S=e=>{M(`搜索: ${e}`),o.value=!0,N()},w=async()=>{try{o.value&&(d.value=[],o.value=!1,_.value=1);const e=await q.news.getNewsPage(_.value,u.value);if(e.code===1200&&e.data){const t=e.data||[];d.value.push(...t),_.value++,t.length<Z&&(r.value=!0)}else r.value=!0}catch(e){console.error("获取动态列表失败:",e),r.value=!0}finally{i.value=!1}},N=()=>{r.value=!1,i.value=!0,o.value||(o.value=!0),w()},V=e=>{g.push({path:"/news-detail",query:{aid:String(e.id||""),title:e.title||""}})},y=e=>E(e||""),x=e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";const c=t.getFullYear(),p=String(t.getMonth()+1).padStart(2,"0"),f=String(t.getDate()).padStart(2,"0");return`${c}.${p}.${f}`};return(e,t)=>{const c=T,p=F,f=I,D=B,L=$;return m(),v("div",W,[l(p,{title:"非遗动态",border:!1,onClickLeft:k},{left:h(()=>[l(c,{name:"arrow-left",class:"back-icon"})]),_:1}),s("div",Y,[s("div",A,[l(f,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),placeholder:"请输入搜索关键词",shape:"round",background:"transparent",class:"custom-search",onSearch:S},null,8,["modelValue"])]),l(L,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a),onRefresh:N},{default:h(()=>[l(D,{loading:i.value,"onUpdate:loading":t[1]||(t[1]=a=>i.value=a),finished:r.value,"finished-text":"",onLoad:w},{default:h(()=>[s("div",G,[(m(!0),v(U,null,z(d.value,a=>(m(),v("div",{class:"news-card",key:a.id,onClick:ae=>V(a)},[s("div",J,[s("img",{src:y(a.imgpath1),loading:"lazy"},null,8,K)]),s("div",O,[s("p",Q,b(a.title),1),s("p",X,[l(c,{name:"calendar-o"}),j(" "+b(x(a.publishtime)),1)])])],8,H))),128))])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])}}}),_e=C(ee,[["__scopeId","data-v-fd63b6a5"]]);export{_e as default};
