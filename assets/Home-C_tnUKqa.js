import{_ as es}from"./_plugin-vue_export-helper-DD8xY_cn.js";import{E as ts}from"./index-D96zdmtH.js";import{S as ns,a as as}from"./index-CghiwNtI.js";/* empty css              */import{d as os,u as is,r,c as ls,o as rs,a as o,b as a,e as n,f as M,g as cs,h as c,w as h,i as d,L as ds,F as v,j as _,t as p,I as us,k as g,s as z,l as hs}from"./index-D962PYms.js";import"./use-id-D8cNzryV.js";const ps={class:"home-container"},vs={class:"banner-wrapper"},_s={key:0,class:"banner-loading"},gs=["src","alt"],ys={key:2,class:"banner-empty"},fs={key:3,class:"custom-indicator"},ms={class:"content-card"},ks={class:"nav-section"},bs={key:0,class:"nav-loading"},ws=["onClick"],xs={class:"icon-box"},Cs=["src","alt"],Ss={class:"nav-name"},Ls={key:2,class:"nav-empty"},$s={class:"section"},Ns={class:"section-header"},js={key:0,class:"loading-box"},qs={key:1,class:"project-grid"},Bs=["onClick"],Ds=["src","alt"],Is={class:"card-text"},Ms={class:"section"},zs={class:"section-header"},Es={key:0,class:"loading-box"},Ps={key:1,class:"scroll-container"},Ts=["onClick"],As=["src"],Fs={class:"overlay"},Vs={class:"section"},Hs={class:"section-header"},Ws={key:0,class:"loading-box"},Ys={key:1,class:"exhibition-grid"},Rs=["onClick"],Zs={class:"exhibit-name"},Gs=["src"],Js={class:"section"},Ks={class:"section-header"},Os={key:0,class:"loading-box"},Qs={key:1,class:"news-list"},Us=["onClick"],Xs={class:"news-img-box"},se=["src"],ee={class:"news-info"},te={class:"news-title van-multi-ellipsis--l2"},ne={class:"news-date"},E=512026,P=512028,ae=os({__name:"Home",setup(oe){const i=is(),y=r([]),b=r(!0),w=r([]),x=r(!0),j=r([]),C=r(!0),q=r([]),S=r(!0),B=r([]),L=r(!0),D=r([]),$=r(!0),I=r(0),T=ls(()=>`${I.value+1}/${y.value.length}`),A=s=>{I.value=s},k=s=>{s==="非遗项目"?i.push({path:"/project-list",query:{classid:String(E)}}):s==="网上展厅"?i.push({path:"/exhibition-list",query:{classid:String(P)}}):s==="非遗传承人"?i.push("/inheritor-list"):s==="非遗动态"&&i.push("/news-list")},F=(s,e)=>{e==="非遗项目"?i.push({path:"/project-list",query:{classid:String(s)}}):e==="网上展厅"?i.push({path:"/exhibition-list",query:{classid:String(s)}}):e==="非遗传承人"?i.push("/inheritor-list"):e==="非遗动态"&&i.push("/news-list")},V=s=>{const e=String(s||"");i.push({path:"/intangible-heritage-list",query:{category:e}})},H=s=>{const e=String(s?.id||"");e&&i.push({path:"/inheritor-detail",query:{id:e,title:s.name}})},W=s=>{let e="/exhibition-album";s.name.includes("音乐")?e="/exhibition-music":s.name.includes("展览")?e="/exhibition-show":s.name.includes("视频")?e="/exhibition-video":s.name.includes("相册")&&(e="/exhibition-album"),i.push({path:e,query:{classid:String(s.classid)}})},Y=async()=>{try{b.value=!0;const s=await g.banner.getBannerList();s.code===1200&&s.data&&s.data.length>0&&(y.value=s.data,console.log("Banner 数据:",s.data))}catch(s){console.error("获取 Banner 失败:",s),z("获取轮播图失败")}finally{b.value=!1}},R=s=>{const e=Number(s?.type||0),l=String(s?.id||""),u=String(s?.title||s?.simpletitle||"新闻");if(l)switch(e){case 1:i.push({path:"/article-detail",query:{aid:l,title:u}});break;case 2:i.push({path:"/exhibition-album-detail",query:{aid:l,title:u}});break;case 5:i.push({path:"/exhibition-video-detail",query:{aid:l,title:u,type:e}});break;default:i.push({path:"/article-detail",query:{aid:l,title:u}});break}},Z=async()=>{try{x.value=!0;const s=await g.navModule.getNavModuleList();s.code===1200&&s.data&&s.data.records&&(w.value=s.data.records,console.log("导航模块数据:",s.data.records))}catch(s){console.error("获取导航模块失败:",s),z("获取导航失败")}finally{x.value=!1}},G=async()=>{try{C.value=!0;const s=await g.project.getProjectList(E);s.code===1200&&s.data&&s.data.records&&(j.value=s.data.records.slice(0,4))}catch(s){console.error("获取非遗项目失败:",s)}finally{C.value=!1}},J=async()=>{try{S.value=!0;const s=await g.inheritor.getInheritorPage(1,"","");s.code===1200&&Array.isArray(s.data)&&(q.value=s.data.slice(0,8))}catch(s){console.error("获取非遗传承人失败:",s)}finally{S.value=!1}},K=async()=>{try{L.value=!0;const s=await g.project.getProjectList(P);s.code===1200&&s.data&&s.data.records&&(B.value=s.data.records.slice(0,4))}catch(s){console.error("获取网上展厅失败:",s)}finally{L.value=!1}},O=async()=>{try{$.value=!0;const s=await g.news.getNewsPage(1,"");s.code===1200&&s.data&&(D.value=(s.data||[]).slice(0,4))}catch(s){console.error("获取非遗动态失败:",s)}finally{$.value=!1}},Q=s=>{i.push({path:"/news-detail",query:{aid:String(s.id||""),title:s.title||""}})},U=s=>hs(s||""),X=s=>{if(!s)return"";const e=new Date(s);if(isNaN(e.getTime()))return"";const l=e.getFullYear(),u=String(e.getMonth()+1).padStart(2,"0"),N=String(e.getDate()).padStart(2,"0");return`${l}.${u}.${N}`};return rs(()=>{Y(),Z(),G(),J(),K(),O()}),(s,e)=>{const l=ds,u=ns,N=as,ss=ts,f=us;return a(),o("div",ps,[n("div",vs,[b.value?(a(),o("div",_s,[c(l,{type:"spinner",color:"#fff"},{default:h(()=>[...e[4]||(e[4]=[d("加载中...",-1)])]),_:1})])):y.value.length>0?(a(),M(N,{key:1,class:"my-swipe",autoplay:3e3,"show-indicators":!1,onChange:A},{default:h(()=>[(a(!0),o(v,null,_(y.value,t=>(a(),M(u,{key:t.id,onClick:m=>R(t)},{default:h(()=>[n("img",{src:t.imgpath1,alt:t.title,class:"banner-img"},null,8,gs)]),_:2},1032,["onClick"]))),128))]),_:1})):(a(),o("div",ys,[c(ss,{description:"暂无轮播图"})])),y.value.length>0?(a(),o("div",fs,p(T.value),1)):cs("",!0)]),n("div",ms,[n("div",ks,[x.value?(a(),o("div",bs,[c(l,{size:"20"},{default:h(()=>[...e[5]||(e[5]=[d("加载中...",-1)])]),_:1})])):w.value.length>0?(a(!0),o(v,{key:1},_(w.value,t=>(a(),o("div",{class:"nav-item",key:t.classid,onClick:m=>F(t.classid,t.name)},[n("div",xs,[n("img",{src:t.imgmin,alt:t.name,class:"nav-icon"},null,8,Cs)]),n("span",Ss,p(t.name),1)],8,ws))),128)):(a(),o("div",Ls,"暂无导航"))]),n("div",$s,[n("div",Ns,[e[7]||(e[7]=n("h3",{class:"title"},"非遗项目",-1)),n("span",{class:"more",onClick:e[0]||(e[0]=t=>k("非遗项目"))},[e[6]||(e[6]=d("全部 ",-1)),c(f,{name:"arrow"})])]),C.value?(a(),o("div",js,[c(l,{size:"24px"},{default:h(()=>[...e[8]||(e[8]=[d("加载中...",-1)])]),_:1})])):(a(),o("div",qs,[(a(!0),o(v,null,_(j.value,t=>(a(),o("div",{class:"project-card",key:t.classid,onClick:m=>V(t.name)},[n("img",{src:t.imgmin,alt:t.name,class:"card-bg"},null,8,Ds),n("span",Is,p(t.name),1)],8,Bs))),128))]))]),n("div",Ms,[n("div",zs,[e[10]||(e[10]=n("h3",{class:"title"},"非遗传承人",-1)),n("span",{class:"more",onClick:e[1]||(e[1]=t=>k("非遗传承人"))},[e[9]||(e[9]=d("全部 ",-1)),c(f,{name:"arrow"})])]),S.value?(a(),o("div",Es,[c(l,{size:"24px"},{default:h(()=>[...e[11]||(e[11]=[d("加载中...",-1)])]),_:1})])):(a(),o("div",Ps,[(a(!0),o(v,null,_(q.value,t=>(a(),o("div",{class:"inheritor-card",key:t.id,onClick:m=>H(t)},[n("img",{src:t.image,class:"inheritor-img"},null,8,As),n("div",Fs,[n("span",null,p(t.name),1)])],8,Ts))),128))]))]),n("div",Vs,[n("div",Hs,[e[13]||(e[13]=n("h3",{class:"title"},"网上展厅",-1)),n("span",{class:"more",onClick:e[2]||(e[2]=t=>k("网上展厅"))},[e[12]||(e[12]=d("全部 ",-1)),c(f,{name:"arrow"})])]),L.value?(a(),o("div",Ws,[c(l,{size:"24px"},{default:h(()=>[...e[14]||(e[14]=[d("加载中...",-1)])]),_:1})])):(a(),o("div",Ys,[(a(!0),o(v,null,_(B.value,t=>(a(),o("div",{class:"exhibit-card",key:t.classid,onClick:m=>W(t)},[n("span",Zs,p(t.name),1),n("img",{src:t.imgmin,class:"exhibit-img"},null,8,Gs)],8,Rs))),128))]))]),n("div",Js,[n("div",Ks,[e[16]||(e[16]=n("h3",{class:"title"},"非遗动态",-1)),n("span",{class:"more",onClick:e[3]||(e[3]=t=>k("非遗动态"))},[e[15]||(e[15]=d("全部 ",-1)),c(f,{name:"arrow"})])]),$.value?(a(),o("div",Os,[c(l,{size:"24px"},{default:h(()=>[...e[17]||(e[17]=[d("加载中...",-1)])]),_:1})])):(a(),o("div",Qs,[(a(!0),o(v,null,_(D.value,t=>(a(),o("div",{class:"news-card",key:t.id,onClick:m=>Q(t)},[n("div",Xs,[n("img",{src:U(t.imgpath1),loading:"lazy"},null,8,se)]),n("div",ee,[n("p",te,p(t.title),1),n("p",ne,[c(f,{name:"calendar-o"}),d(" "+p(X(t.publishtime)),1)])])],8,Us))),128))]))]),e[18]||(e[18]=n("div",{style:{height:"50px"}},null,-1))])])}}}),he=es(ae,[["__scopeId","data-v-4b3a1049"]]);export{he as default};
